bom: com.google.cloud:gcp-lts-bom:0.1.0-SNAPSHOT
# Why not using ".kokoro/build.sh"? It's because it uses realpath command, which is not available
# in Mac.
repositories:
  - name: java-monitoring
    url: https://github.com/googleapis/java-monitoring.git
    tag: v2.1.0
    modification: Maven
    commands: |
      mvn -B -V -ntp test \
          -Dclirr.skip=true \
          -Denforcer.skip=true \
          -Dmaven.javadoc.skip=true \
          -Dgcloud.download.skip=true \
          -T 1C
  - name: java-trace
    url: https://github.com/googleapis/java-trace.git
    tag: v1.3.0
    modification: Maven
    commands: |
      mvn -B -V -ntp test \
          -Dclirr.skip=true \
          -Denforcer.skip=true \
          -Dmaven.javadoc.skip=true \
          -Dgcloud.download.skip=true \
          -T 1C
  - name: java-pubsub
    url: https://github.com/googleapis/java-pubsub.git
    tag: v1.112.0
    modification: Maven
    commands: |
      mvn -B -V -ntp test \
          -Dclirr.skip=true \
          -Denforcer.skip=true \
          -Dmaven.javadoc.skip=true \
          -Dgcloud.download.skip=true \
          -T 1C
  - name: google-http-java-client
    url: https://github.com/googleapis/google-http-java-client.git
    tag: v1.39.1
    modification: Maven
    # google-http-client-appengine does not work with the latest appengine-client-1.0-sdk
    # but the module is not part of the BOM.
    # https://github.com/GoogleCloudPlatform/cloud-opensource-java/issues/1974#issuecomment-805000604
    commands: |
      mvn -B -V -ntp test \
          -pl google-http-client \
          -Dclirr.skip=true \
          -Denforcer.skip=true \
          -Dmaven.javadoc.skip=true \
          -Dgcloud.download.skip=true \
          -T 1C
  - name: java-bigquery
    url: https://github.com/googleapis/java-bigquery.git
    tag: v1.127.10
    modification: Maven
    commands: |
      mvn -B -V -ntp test \
          -Dclirr.skip=true \
          -Denforcer.skip=true \
          -Dmaven.javadoc.skip=true \
          -Dgcloud.download.skip=true \
          -T 1C
  - name: java-spanner
    url: https://github.com/googleapis/java-spanner.git
    tag: v5.1.0
    modification: Maven
    commands: |
      mvn -B -V -ntp test \
          -Dclirr.skip=true \
          -Denforcer.skip=true \
          -Dmaven.javadoc.skip=true \
          -Dgcloud.download.skip=true \
          -T 1C
  - name: gRPC
    url: https://github.com/grpc/grpc-java.git
    tag: v1.36.0
    modification: Gradle
    # :grpc-netty:check does not work on suztomo's Mac
    commands: |
      echo "skipCodegen=true" >> gradle.properties
      echo "skipAndroid=true" >> gradle.properties
      ./gradlew :grpc-alts:check \
        :grpc-api:check \
        :grpc-auth:check \
        :grpc-context:check \
        :grpc-core:check \
        :grpc-grpclb:check \
        :grpc-okhttp:check \
        :grpc-protobuf:check \
        :grpc-services:check \
        :grpc-stub:check \
        :grpc-testing:check

#  - name: Beam
#    url: https://github.com/apache/beam.git
#    tag: v2.28.0

